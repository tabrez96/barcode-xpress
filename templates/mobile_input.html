{% extends "base.html" %}

{% block title %}Barcode Scanner - Mobile{% endblock %}

{% block header %}Barcode Scanner{% endblock %}

{% block content %}
<div class="flex flex-col items-center" x-data>
    <p class="text-center mb-4 text-text-secondary">Scan barcodes from your phone and send them to your computer</p>

    <form
        hx-post="/scan"
        hx-target="#message"
        hx-swap="innerHTML"
        @htmx:after-request="$event.detail.successful && ($el.reset(), $refs.barcodeInput.focus())"
    >
        <input
            type="text"
            id="text-input"
            name="barcode"
            placeholder="Enter or scan barcode"
            class="border border-border p-3 rounded-lg w-full max-w-md mb-4 focus:outline-none focus:shadow-focus text-lg bg-bg-soft text-text"
            autofocus
            x-ref="barcodeInput"
        >

        <button
            type="submit"
            class="bg-primary text-bg px-6 py-3 rounded-lg text-lg font-medium hover:bg-secondary transition-colors w-full max-w-md"
        >
            Send to Computer
        </button>
    </form>

    <div id="message" class="mt-4 text-center">
        {% if message %}
        <div class="text-{{ 'success' if message_type == 'success' else 'error' }} font-medium">
            {{ message }}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
